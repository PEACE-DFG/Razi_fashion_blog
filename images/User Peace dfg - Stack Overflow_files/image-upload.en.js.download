(()=>{"use strict";var e,o,n,t,a={26934:(e,o,n)=>{n.d(o,{S:()=>t});const t={LEFT_MOUSE:1,MIDDLE_MOUSE:2,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F4:115,COMMA:188}}},i={};function r(e){var o=i[e];if(void 0!==o)return o.exports;var n=i[e]={exports:{}};return a[e](n,n.exports,r),n.exports}r.d=(e,o)=>{for(var n in o)r.o(o,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r.p="",r.p=document.getElementById("webpack-public-path").innerText+"Js/",t=r(26934),StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{},StackExchange.imageUploader=(e=window.URL||window.webkitURL,o={},n={uploadUrl:"/upload/image",showLowRepWarning:!1},{createImageUploadBackground:function(){var e=window.document,o=(window.navigator,e.createElement("div")),n=o.style;o.className="wmd-prompt-background",n.position="absolute",n.top="0",n.zIndex="1000",n.opacity="0.5";var t=function(){var e,o,n,t,a=window.document,i=window.self;return i.innerHeight&&i.scrollMaxY?(e=a.body.scrollWidth,o=i.innerHeight+i.scrollMaxY):a.body.scrollHeight>a.body.offsetHeight?(e=a.body.scrollWidth,o=a.body.scrollHeight):(e=a.body.offsetWidth,o=a.body.offsetHeight),i.innerHeight?(n=i.innerWidth,t=i.innerHeight):a.documentElement&&a.documentElement.clientHeight?(n=a.documentElement.clientWidth,t=a.documentElement.clientHeight):a.body&&(n=a.body.clientWidth,t=a.body.clientHeight),[Math.max(e,n),Math.max(o,t),n,t]}();return n.height=t[1]+"px",n.left="0",n.width="100%",e.body.appendChild(o),o},removeImageUploadBackground:function(){$(".wmd-prompt-background").remove()},enableLowRepWarning:function(){n.showLowRepWarning=!0},uploadImageDialog:function(a,i){"string"===$.type(i)&&(i={uploadUrl:i}),i=$.extend(n,i);var r,d="upload-iframe-"+(new Date).getTime(),l="/render/image-upload?uploadUrl={0}&showLowRepWarning={2}".formatUnicorn(encodeURIComponent(i.uploadUrl),i.showLowRepWarning?"true":"false"),s=$('<div class="modal image-upload wmd-prompt-dialog auto-center" tabindex="-1"></div>').addClass("js-async-load").data("load-url",l),p=0,c=function(e){s&&s.fadeOutAndRemove(),$("body").off("keydown",w.checkEscape).off("paste",w.paste),void 0!==e&&a(e)},u=function(e){return 0===e.type.indexOf("image/")},f=function(e,o){var n=s.find("."+e);n.find(".tab-page").hide(),n.find("."+e+"-"+o).show(),n.data("active-tab",o)},m=function(){window.closeDialog=c,window.displayUploadError=g.uploadError},g={resetInputs:function(){s.find(".js-modal-input-file, .js-modal-input-url").prop("disabled",!1).attr("value","")},uploadError:function(e){g.resetInputs(),s.find(".modal-options-error .modal-options-error-message").text(e),f("modal-options","error")},ajaxResult:function(e){$("#"+d).contents().find("html").html(e)},ajaxError:function(e,o,n){g.uploadError(__tr(["Request returned an error: [$status$] $error$"], {status: o,error: n}, "en", []))}},w={showLink:function(e){e&&e.preventDefault(),f("modal-options","url"),s.find(".js-modal-input-url").focus()},resetView:function(e){e&&e.preventDefault(),f("modal-dropzone","default"),f("modal-options","default"),s.find(".js-modal-cta-submit").prop("disabled",!0),s.find(".modal-dropzone-preview").empty(),s.find(".js-modal-input-file").val(""),g.resetInputs(),p=0,r.removeClass("hover"),s.find("form").off("submit").on("submit",w.oldSchoolSubmit),s.find("form input[name=fkey]").val(StackExchange.options.user.fkey)},inputFileOrUrl:function(){var e=!!s.find(".js-user-input").filter((function(){return this.value.length})).length;s.find(".js-modal-cta-submit").prop("disabled",!e)},disablePasteHandling:function(){$("body").off("paste",w.previewImage)},enablePasteHandling:function(){$("body").on("paste",{property:"clipboardData"},w.previewImage)},selectFile:function(e){e.preventDefault(),s.find(".js-modal-input-file").click()},clickFile:function(e){e.stopPropagation()},previewImage:function(o){var n,t,a;o.preventDefault();var i,r,d=(i=o.originalEvent[o.data.property]).items&&(r=$.grep(i.items,u)).length>0?r[0].getAsFile():i.files&&(r=$.grep(i.files,u)).length>0?r[0]:void 0;if(d){n=d.size>=2097152,(t=s.find(".modal-dropzone-preview")).empty(),a=e.createObjectURL(d);var l=parseInt(t.css("width"))-30,p=parseInt(t.css("height"))-30;$("<img>").attr("src",a).css({maxWidth:`${l}px`,maxHeight:`${p}px`}).on("load",{url:a},w.loadPreviewImage).appendTo(t),s.find("form").off("submit").on("submit",d,w.ajaxSubmit),s.find(".js-modal-cta-submit").prop("disabled",n),f("modal-dropzone","preview"),f("modal-options",n?"toobig":"preview")}},dragEnter:function(e){e.preventDefault(),p++,r.addClass("hover")},dragLeave:function(){0==--p&&r.removeClass("hover")},clickClose:function(e){e.preventDefault(),c(null)},loadPreviewImage:function(o){e.revokeObjectURL(o.data.url)},oldSchoolSubmit:function(e){var o,n="url"===(o="modal-options",s.find("."+o).data("active-tab"));f("modal-options","uploading"),s.find(".js-modal-input-file").prop("disabled",n),s.find(".js-modal-input-url").prop("disabled",!n),e.target.target=d,m()},ajaxSubmit:function(e){e.preventDefault(),f("modal-options","uploading");var o=new window.FormData;o.append("file",e.data),o.append("fkey",StackExchange.options.user.fkey),m(),$.ajax({url:i.uploadUrl,data:o,cache:!1,contentType:!1,processData:!1,type:"POST",success:g.ajaxResult,error:g.ajaxError})},checkEscape:function(e){e.which===t.S.ESC&&(e.preventDefault(),c(null))}},h=function(e){$('<iframe style="display: none;" src="about:blank" />').attr("id",d).attr("name",d).appendTo(e)};return s.appendTo("body").center().fadeIn("fast").promise().done((function(){s.asyncLoad({callback:function(){h(s),function(){s.css("height","auto"),s.find(".modal-options-uploading p").addSpinner(),s.find(".modal-options-default a").click(w.showLink),s.find(".modal-options-cancel").click(w.resetView),s.find(".js-modal-input-file").on("click",w.clickFile).on("change",w.inputFileOrUrl);var e=s.find(".js-modal-input-url").on("input keydown",w.inputFileOrUrl);s.find(".modal-dropzone-default").click(w.selectFile),s.find(".js-modal-input-file").change({property:"target"},w.previewImage),s.find(".js-modal-input-url").focus(w.disablePasteHandling).blur(w.enablePasteHandling),w.enablePasteHandling(),r=s.find(".modal-dropzone-default").on("dragenter",w.dragEnter).on("dragleave",w.dragLeave).on("dragover",!1).on("drop",{property:"dataTransfer"},w.previewImage),s.find(".js-modal-close").click(w.clickClose),w.resetView(),s.focus(),i.imageUrl&&(w.showLink(),e.val(i.imageUrl),w.inputFileOrUrl())}()},cache:o})})),s.on("popupClose",w.disablePasteHandling),$("body").on("keydown",w.checkEscape),!0}})})();